### Arch
# Mirrors

# Core packages
sudo pacman -S --needed brightnessctl ranger waybar swayidle swaylock grim slurp mako ncmpcpp imv network-manager-applet htop libnotify mpd atool snes9x-gtk xdg-desktop-portal-wlr mupdf shotwell newsboat udiskie vulkan-icd-loader lib32-vulkan-icd-loader vulkan-radeon lib32-vulkan-radeon lutris steam sox cliphist wl-clipboard v4l-utils python-pipx xorg-xwayland libreoffice-fresh rofi-wayland power-profiles-daemon linux-headers dhcpcd android-udev android-file-transfer unzip pipewire pipewire-pulse wireplumber gst-plugin-pipewire intel-ucode polkit galculator thunar fish scx-scheds vim-spell-uk vim pavucontrol foot nano	bluez bluez-utils gamemode mangohud signal-desktop ttf-font-awesome awesome-terminal-fonts wildmidi unzip ttf-liberation curl xdg-desktop-portal thunar-archive-plugin thunar-volman galculator ffmpeg gnome-keyring polkit-gnome lib32-mangohud gamescope networkmanager-openvpn pacman-contrib mtpfs gvfs-mtp gvfs-gphoto2 

# AUR packages
yay -S --needed rofi-power-menu rofi-bluetooth-git wttr pcloud-drive heroic-games-launcher-bin lact proton-ge-custom-bin simplenote-electron-bin jmtpfs

# Other services

sudo systemctl enable NetworkManager
sudo systemctl enable bluetooth
sudo systemctl enable dbus
sudo usermod -aG input tom

Snapper and timeshift set up

# Package cache clearup

sudo mkdir -p /etc/pacman.d/hooks
sudo mv clean_package_cache.hook /etc/pacman.d/hooks

# Clipboard
Change config file - uncomment cliphist, comment clipman

# Cachy
paru -S proton-cachyos wine-cachyos wine-gecko wine-mono

paru -Rns wofi btop micro octopi alacritty

### Fedora

# coprs  - should be able to install fedora_codecs_copr.sh

sudo dnf copr enable mmuzila/signal atim/heroic-games-launcher ilyaz/LACT bieszczaders/kernel-cachyos-addons 

#packages

sudo dnf install brightnessctl wl-clipboard clipman ranger waybar swayidle swaylock grim slurp mako ncmpcpp curl imv network-manager-applet htop libnotify atool snes9x-gtk xdg-desktop-portal-wlr mupdf shotwell vim fish mpv pipx util-linux-user signal gamemode mangohud steam lutris heroic-games-launcher-bin lact flatpak power-profiles-daemon xorg-x11-server-Xwayland udiskie sox v4l-utils rofi-wayland scx-scheds swaybg pavucontrol fontawesome-fonts-all liberation-fonts adobe-source-code-pro-fonts polkit-gnome unzip android-file-transfer exfatprogs NetworkManager-openvpn openvpn xdg-desktop-portal libreoffice vlc gvfs-mtp gvfs-gphoto2 jmtpfs

sudo dnf remove kanshi dunst 
sudo dnf autoremove

May also want a calculator
If android does not show up in thunar, install jmtpfs gvfs-mtp gvfs-gphoto2

# codecs - should be able to install fedora_codecs_copr.sh

sudo dnf install https://mirrors.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://mirrors.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm
sudo dnf config-manager setopt fedora-cisco-openh264.enabled=1
sudo dnf swap ffmpeg-free ffmpeg --allowerasing
sudo dnf update @multimedia --setopt="install_weak_deps=False" --exclude=PackageKit-gstreamer-plugin
sudo dnf swap mesa-va-drivers mesa-va-drivers-freeworld
sudo dnf swap mesa-vdpau-drivers mesa-vdpau-drivers-freeworld
sudo dnf swap mesa-va-drivers.i686 mesa-va-drivers-freeworld.i686
sudo dnf swap mesa-vdpau-drivers.i686 mesa-vdpau-drivers-freeworld.i686
sudo dnf install rpmfusion-free-release-tainted
sudo dnf install libdvdcss

# Things that need to be executable

echo $PATH
Check ~/.local/bin is in path, then 

cp ~/.config/Themes_other/rofi-power-menu ~/.local/bin
cp ~/.config/Themes_other/rofi-bluetooth ~/.local/bin
sudo cp ~/Downloads/pCloud.img /usr/bin

May need to chmod +x the rofi scripts

# wttr

cd /tmp
git clone https://github.com/cblte/bash-script-wttr
cd bash-script-wttr
bash installer.sh

# Flatpaks

flatpak remote-add --if-not-exists flathub https://dl.flathub.org/repo/flathub.flatpakrepo

flatpak install com.simplenote.Simplenote org.duckstation.DuckStation us.zoom.Zoom

sudo flatpak override --filesystem=$HOME/.themes
sudo flatpak override --filesystem=$HOME/.icons

# Clipboard
Change config file - uncomment clipman, comment cliphist
For clipman to work, create blank file ~/.local/share/clipman-primary.json

### Shared

# Vim

Add 
xnoremap <silent> <C-c> :w !wl-copy<CR><CR> 
:set number
to /etc/vimrc

# fish
chsh -s /usr/bin/fish
Logout and in

# LACT
sudo vim /etc/default/grub, add
GRUB_CMDLINE_LINUX_DEFAULT="... amdgpu.ppfeaturemask=0xffffffff"
Arch: sudo grub-mkconfig -o /boot/grub/grub.cfg
Fedora: sudo grub2-mkconfig -o /etc/grub2-efi.cfg

sudo systemctl enable --now lactd

# MangoHud

mkdir ~/.config/MangoHud
sudo cp /usr/share/doc/mangohud/MangoHud.conf.example ~/.config/MangoHud/MangoHud.conf
vim  ~/.config/MangoHud/MangoHud.conf

# yewtube

sudo pipx ensurepath --global
pipx install yewtube
pipx runpip yewtube install --force-reinstall 'httpx<0.28'

# castero

pipx install castero

# Adwaita for steam
git clone https://github.com/tkashkin/Adwaita-for-Steam
cd Adwaita-for-Steam
./install.py -t normal -c $THEME

# Start sound

exec --no-startup-id startsound.sh

### Void

# Needed packages

xbps-install -S void-repo-nonfree void-repo-multilib

xbps-install -S dbus bluez NetworkManager NetworkManager-openvpn libspa-bluetooth pipewire wireplumber cliphist wl-clipboard	grim   sway swaybg swaylock swayidle Waybar mako ranger mpd brightnessctl ncmpcpp yewtube Imv network-manager-applet htop libnotify atool xdg-desktop-portal-wlr xorg-server-xwayland snes9x-gtk mupdf shotwell newsboat MangoHud gamemode lutris curl flatpak power-profiles-daemon corectrl fish-shell foot Signal-Desktop mpv vim steam libreoffice exfatprogs ntfs-3g vulkan-loader vulkan-loader-32bit mesa mesa-32bit fastfetch wofi nano elogind xtools git wlroots dmenu rxvt-unicode font-awesome fontconfig nerd-fonts-symbols-ttf	wlogout libdvdcss libdvdnav libdvdread libdvdread-32bit jmtpfs gvfs-mtp gvfs-gphoto2 vlc vulkan-loader vulkan-loader-32bit linux-headers font-awesome font-awesome5 font-awesome6 liberation-fonts-ttf unzip android-udev-rules android-file-transfer-linux udiskie

# if running on main pc
mesa-vulkan-radeon mesa-vulkan-radeon-32bit

# if running on laptop
mesa-vulkan-intel mesa-vulkan-intel-32bit broadcom-bt-firmware broadcom-wl-dkms 

# Needed servcies

sudo rm /var/service/dhcpcd

sudo ln -s /etc/sv/pipewire /var/service
sudo ln -s /etc/sv/dbus /var/service
sudo ln -s /etc/sv/bluetoothd /var/service
sudo ln -s /etc/sv/elogind /var/service
sudo ln -s /etc/sv/NetworkManager /var/service

# Void flatpaks
flatpak install com.simplenote.Simplenote org.duckstation.DuckStation us.zoom.Zoom com.heroicgameslauncher.hgl

# Bluetooth
https://github.com/techkek/wofi-bluetooth

# Extra theming and config
https://github.com/gfhdhytghd/wlogout-theme/blob/main/README.md 
https://github.com/sentriz/cliphist - to connect wofi for clipboard
https://mephisto.cc/en/tech/wofi/ - wofi theming basics
https://github.com/kmephistoh/dotfiles/tree/main/.config/wofi - example config

# Fish Alias

~/.config/fish/config.fish
alias xup = 'sudo xbps-install -Su'
alias fuk = 'flatpak update'
